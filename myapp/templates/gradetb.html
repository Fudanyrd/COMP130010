{% extends "base.html" %}
{% block header %}
{% endblock header %}

{% block content %}
  <p> This is the grades to course {{ course }} in table form.</p>
  <hr>
  <table style="border: 4px solid black">
    <colgroup span="4"></colgroup>
    <thead>
    <tr>
        <th style="border: 1px solid black" scope="col">Student</th>
        <th style="border: 1px solid black" scope="col">Student ID</th>
        <th style="border: 1px solid black" scope="col">Grade</th>
        <th style="border: 1px solid black" scope="col">Operation</th>
    </tr>
    </thead>
   <tbody>
    {% for grade in grades %}
    <tr>
        <th style="border: 1px solid black" scope="row">{{ grade.sname }}</th>
        <td style="border: 1px solid black" >{{ grade.sid }}</td>
        {% if grade.passed %}
        <td style="color:green;border: 1px solid black">{{ grade.value }}</td>
        {% else %}
        <td style="color:red;border: 1px solid black">{{ grade.value }}</td>
        {% endif %}
        <td style="border: 1px solid black" ><a href="{% url 'myapp:regrade' grade.id %}">Regrade this</a></td>
    </tr>
    {% endfor %}
    {% if grades %}
    <tr>
        <th colspan="2" scope="row"style="border: 1px solid black" >Average grade</th>
        <td style="border: 1px solid black" >{{ average }} </td>
        <td style="border: 1px solid black" ></td>
    </tr>
    {% endif %}
    {% for student in ungraded %}
    <tr>
        <th style="border: 1px solid black"  scope="row">{{ student.name }}</th>
        <td style="border: 1px solid black" >{{ student.id }}</td>
        <td style="color:blue;border: 1px solid black">{{ ungraded }}</td>
        <td style="border: 1px solid black">
          {% if student.gender == 'M' %}
            <a href="{% url 'myapp:givegrade' course.id student.id %}">Grade Him</a>        
          {% else %}
            <a href="{% url 'myapp:givegrade' course.id student.id %}">Grade Her</a>
          {% endif %}
        </td>
    </tr>
    {% endfor %}
  </tbody> </table>
  <p> 
    For convenience, you may use this <a href="{% url 'myapp:gradeall' course.id %}">link</a> 
    to grade all students in one form.
  </p>
{% endblock content %}
